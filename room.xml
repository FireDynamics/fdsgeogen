<fds>

    <var px="1" pz="1" />

    <para dim="decomp_y" var="py" list="1, 2" />
    <para dim="comb" var="hrr" file="room.plist" col="0" />
    <para dim="comb" var="roomlz" file="room.plist" col="1" />    

    <var chid="'ref_room'" outfile="'ref_room_m%03d_id%03d.fds'%(px*py*pz,para_id)" />
    
    <info chid="chid" outfile="outfile"/>

    <var delta = "0.1" />

    <var roomlx = "6.0" roomly="4.0" />
    <var bufferx = "1.0" bufferz = "1.5" />
    <var wallthick = "delta" />

    <var windowwidth = "1.0" windowx = "2.0"/>
    <var doorwidth = "1.0" doorheight = "2.0"/>

    <var dxmin = "0.0"  dxmax = "roomlx + bufferx"/>
    <var dymin = "0.0"  dymax = "roomly"/>
    <var dzmin = "0.0"  dzmax = "roomlz + bufferz"/>    

    <var nx = "int(div235((dxmax - dxmin) / delta))" />
    <var ny = "int(div235((dymax - dymin) / delta))" />
    <var nz = "int(div235((dzmax - dzmin) / delta))" />
    
    <var xmax = "dxmin + nx * delta" />
    <var ymax = "dymin + ny * delta" />
    <var zmax = "dzmin + nz * delta" />        

    <var xmin = "dxmin"  ymin = "dymin"  zmin = "dzmin" />

    <boundary x="open" y="open" zmax="open"/>

    <mesh />

    <input text="TIME T_END=10.0" />

    <!-- xmin wall -->
    <obst x1="xmin" x2="xmin + wallthick" 
          y1="ymin" y2="roomly" 
          z1="zmin" z2="roomlz" />
    <!-- xmax wall -->
    <obst x1="roomlx - wallthick" x2="roomlx" 
          y1="ymin" y2="roomly" 
          z1="zmin" z2="roomlz" />
    <!-- ymin wall -->
    <obst x1="xmin" x2="roomlx" 
          y1="ymin" y2="ymin + wallthick" 
          z1="zmin" z2="roomlz" 
          color="INVISIBLE"/>
    <!-- ymax wall -->
    <obst x1="xmin" x2="roomlx" 
          y1="roomly - wallthick" y2="roomly" 
          z1="zmin" z2="roomlz" />
    <!-- zmax wall -->
    <obst x1="xmin" x2="roomlx" 
          y1="ymin" y2="roomly" 
          z1="roomlz - wallthick" z2="roomlz" />

    <!-- window -->
    <var window_x1 = "windowx - windowwidth/2.0" window_x2 = "windowx + windowwidth/2.0"/>
    <var window_y1 = "roomly/2.0 - windowwidth/2.0" window_y2 = "roomly/2.0 + windowwidth/2.0" />
    <var window_z  = "roomlz" />
    <hole x1="window_x1" x2="window_x2" 
          y1="window_y1" y2="window_y1" 
          z1="window_z - wallthick" z2="window_z" />
          
    <!-- door -->
    <var door_x  = "roomlx" />
    <var door_y1 = "roomly/2.0 - doorwidth/2.0" door_y2 = "roomly/2.0 + doorwidth/2.0" />
    <var door_z1 = "0" door_z2="wallthick + doorheight" />
    <hole x1="door_x-wallthick" x2="door_x" 
          y1="door_y1" y2="door_y2" z1="door_z1" z2="door_z2" />
          
    <!-- fire -->
    <fire type="burningbox" cx = "1.0" cy = "roomly/2.0" lz = "wallthick" width="0.4" height="0.2" hrr="10" />
    
    <!-- slices -->
    <slice y="roomly/2.0" q="TEMPERATURE" v="1" />
    
    <!-- devices -->
    <loop var='q' list="VOLUME FLOW +, VOLUME FLOW -, MASS FLOW +, MASS FLOW -, HEAT FLOW +, HEAT FLOW -">
        <device id="'DOOR %s'%q" x1="door_x" x2="door_x" 
                y1="door_y1" y2="door_y2" z1="door_z1" z2="door_z2" q="q" />
        <device id="'WINDOW %s'%q" x1="window_x1" x2="window_x2" 
                y1="window_y1" y2="window_y2" z1="window_z" z2="window_z" q="q" />
    </loop>

</fds>
